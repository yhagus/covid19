<!doctype html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Content-Language" content="en"/>
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="theme-color" content="#4188c9">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <link rel="icon" href="./favicon.ico" type="image/x-icon"/>
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico"/>
    <!-- Generated: 2018-04-16 09:29:05 +0200 -->
    <title>Homepage - tabler.github.io - a responsive, flat and full featured admin template</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,500,500i,600,600i,700,700i&amp;subset=latin-ext">
    <script src="./assets/js/require.min.js"></script>
    <script>
        requirejs.config({
            baseUrl: '.'
        });
    </script>
    <!-- Dashboard Core -->
    <link href="./assets/css/dashboard.css" rel="stylesheet"/>
    <script src="./assets/js/dashboard.js"></script>
    <!-- c3.js Charts Plugin -->
    <link href="./assets/plugins/charts-c3/plugin.css" rel="stylesheet"/>
    <script src="./assets/plugins/charts-c3/plugin.js"></script>
    <!-- Google Maps Plugin -->
    <link href="./assets/plugins/maps-google/plugin.css" rel="stylesheet"/>
    <script src="./assets/plugins/maps-google/plugin.js"></script>
    <!-- Input Mask Plugin -->
    <script src="./assets/plugins/input-mask/plugin.js"></script>
</head>
<body class="">
<div class="page">
    <div class="page-main">
        <div class="header">
            <div class="container">
                <div class="d-flex">
                    <a class="header-brand" href="./index.html">
                        <img src="./demo/covid19.png" class="header-brand-img" alt="tabler logo">
                        COVID-19
                    </a>
                </div>
            </div>
        </div>

        <!-- COVID NUMBERS -->

        <div class="my-3 my-md-5">
            <div class="container">
                <div class="row row-cards">
                    <div class="col">
                        <div class="card">
                            <div class="card-body p-3 text-center">
                                <div class="h1 m-0" id="confirmed"></div>
                                <div class="text-muted mb-4">Confirmed</div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <div class="card-body p-3 text-center">
                                <div class="h1 m-0" id="deaths">17</div>
                                <div class="text-muted mb-4">Deaths</div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <div class="card-body p-3 text-center">
                                <div class="h1 m-0" id="recovered"></div>
                                <div class="text-muted mb-4">Recovered</div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card">
                            <div class="card-body p-3 text-center">
                                <div class="h1 m-0" id="active"></div>
                                <div class="text-muted mb-4">Active</div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--GRAPH-->
                <div class="row">
                    <div class="col">
                        <div class="card">
                            <div class="card-header">
                                <h3 class="card-title">Latest Data</h3>
                            </div>
                            <div id="chart-development-activity" style="height: 10rem"></div>
                            <div class="table-responsive">
                                <table class="table card-table table-striped table-vcenter" id="tableData">
                                    <thead>
                                    <tr>
                                        <th>Country</th>
                                        <th>Confirmed</th>
                                        <th>Deaths</th>
                                        <th>Recovered</th>
                                        <th>Active</th>
                                    </tr>
                                    </thead>
                                    <tbody id="tbody">

                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <script>
                            require(['c3', 'jquery'], function (c3, $) {
                                $(document).ready(function () {
                                    var chart = c3.generate({
                                        bindto: '#chart-development-activity', // id of chart wrapper
                                        data: {
                                            columns: [
                                                // each columns data
                                                ['data1', 0, 5, 1, 2, 7, 5, 6, 8, 24, 7, 12, 5, 6, 3, 2, 2, 6, 30, 10, 10, 15, 14, 47, 65, 55]
                                            ],
                                            type: 'area', // default type of chart
                                            groups: [
                                                ['data1', 'data2', 'data3']
                                            ],
                                            colors: {
                                                'data1': tabler.colors["blue"]
                                            },
                                            names: {
                                                // name of each serie
                                                'data1': 'Purchases'
                                            }
                                        },
                                        axis: {
                                            y: {
                                                padding: {
                                                    bottom: 0,
                                                },
                                                show: false,
                                                tick: {
                                                    outer: false
                                                }
                                            },
                                            x: {
                                                padding: {
                                                    left: 0,
                                                    right: 0
                                                },
                                                show: false
                                            }
                                        },
                                        legend: {
                                            position: 'inset',
                                            padding: 0,
                                            inset: {
                                                anchor: 'top-left',
                                                x: 20,
                                                y: 8,
                                                step: 10
                                            }
                                        },
                                        tooltip: {
                                            format: {
                                                title: function (x) {
                                                    return '';
                                                }
                                            }
                                        },
                                        padding: {
                                            bottom: 0,
                                            left: -1,
                                            right: -1
                                        },
                                        point: {
                                            show: false
                                        }
                                    });
                                });
                            });
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="row align-items-center flex-row-reverse">
                <div class="col-auto ml-lg-auto">
                    <div class="row align-items-center">
                        <div class="col-auto">
                            <ul class="list-inline list-inline-dots mb-0">
                                <li class="list-inline-item"><a href="./docs/index.html">Documentation</a></li>
                                <li class="list-inline-item"><a href="./faq.html">FAQ</a></li>
                            </ul>
                        </div>
                        <div class="col-auto">
                            <a href="https://github.com/tabler/tabler" class="btn btn-outline-primary btn-sm">Source
                                code</a>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-auto mt-3 mt-lg-0 text-center">
                    Copyright © 2018 <a href=".">Tabler</a>. Theme by <a href="https://codecalm.net" target="_blank">codecalm.net</a>
                    All rights reserved.
                </div>
            </div>
        </div>
    </footer>
</div>
<script>
    let confirmed = 0;
    let deaths = 0;
    let recovered = 0;
    let active = 0;
    let data;

    fetch('https://api.kawalcorona.com')
        .then((response) => response.text())
        .then(text => {
            data = JSON.parse(text);
            console.log(data[0]);
            for (let i = 0; i < data.length; i++) {
                confirmed += data[i].attributes.Confirmed;
                deaths += data[i].attributes.Deaths;
                recovered += data[i].attributes.Recovered;
                active += data[i].attributes.Active;
            }
            document.getElementById("confirmed").innerHTML = confirmed;
            document.getElementById("deaths").innerHTML = deaths;
            document.getElementById("recovered").innerHTML = recovered;
            document.getElementById("active").innerHTML = active;
            for (let j = 0 ; j < data.length ; j++) {
                let tr = document.createElement("tr");
                let tdRegion = document.createElement("td");
                let tdConfirmed = document.createElement("td");
                let tdDeaths = document.createElement("td");
                let tdRecovered = document.createElement("td");
                let tdActive = document.createElement("td");
                let tdDataRegion = document.createTextNode(data[j].attributes.Country_Region);
                let tdDataConfirmed = document.createTextNode(data[j].attributes.Confirmed);
                let tdDataDeaths = document.createTextNode(data[j].attributes.Deaths);
                let tdDataRecovered = document.createTextNode(data[j].attributes.Recovered);
                let tdDataActive = document.createTextNode(data[j].attributes.Active);
                document.getElementById("tbody").appendChild(tr);
                tdRegion.appendChild(tdDataRegion);
                tdConfirmed.appendChild(tdDataConfirmed);
                tdDeaths.appendChild(tdDataDeaths);
                tdRecovered.appendChild(tdDataRecovered);
                tdActive.appendChild(tdDataActive);
                tr.append(tdRegion,tdConfirmed,tdDeaths,tdRecovered,tdActive);
            }


        });
</script>
</body>
</html>